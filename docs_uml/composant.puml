@startuml
!define RECTANGLE class

skinparam componentStyle rectangle
skinparam defaultFontSize 11

package "Blockchain Layer" {
    [Smart Contracts\nStaking/Rewards\n(Foundry/Solidity)] as SC
    [DAI Token\nContract] as DAI
    [Chainlink Oracles\nPrice/Volatility/Data] as Oracle
}

package "Backend Services" {
    [Flask API\nREST Endpoints\nJWT Auth] as API
    [Celery Workers\nAsync Jobs\nRewards Calc] as Worker
    [MongoDB\nUsers/Metrics\nHistory] as DB
    [Redis\nCache/Queue] as Redis
}

package "Frontend" {
    [Next.js App\nwagmi/viem\nRainbowKit] as NexjsApp
    [Analytics Dashboard\nRecharts\nChakraUI] as Dashboard
}

package "External Services" {
    [Email/Push\nNotifications] as Notif
    [Monitoring\n& Logs] as Monitor
}

' Connexions principales
Frontend --> API : HTTP/REST
Frontend --> SC : Web3 RPC
API --> DB : Read/Write
API --> Redis : Cache
API --> Worker : Trigger Jobs
Worker --> SC : Read state
Worker --> Oracle : Fetch data
Worker --> DB : Store metrics
Worker --> Notif : Send alerts
SC --> DAI : Transfer/Lock
SC <--> Oracle : Price feeds

Monitor ..> API : Logs
Monitor ..> Worker : Metrics
Monitor ..> SC : Events

@enduml